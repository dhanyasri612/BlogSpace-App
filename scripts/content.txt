Registration successful. We couldn't send a verification email (SMTP not configured or failed). Use the link below to verify your account.

If you didn't receive the email, verify using this link:

http://localhost:3000/api/api/user/verify?token=1yhcu0d1ej9jmje5s9xl.           Good question â€” this is a very common issue in blog / auth projects ğŸ‘
Right now your BlogSpace app probably only checks format, not existence, so fake emails pass.

There are 3 levels of email validation. You should use at least level 2, and ideally level 3.

âœ… Level 1: Format validation (basic â€“ you already have this)

Checks only if the email looks like an email.

Example (frontend or backend)
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

if (!emailRegex.test(email)) {
  return res.status(400).json({ message: "Invalid email format" });
}


âŒ Problem:
abc@fake123.com â†’ still passes

âœ… Level 2: Email verification via OTP / link (RECOMMENDED)

This ensures the email actually exists and is owned by the user.

ğŸ” Flow (Best Practice)

User registers

Account is created as unverified

Send verification email

User clicks link / enters OTP

Mark email as verified

ğŸ§© Backend Changes (MongoDB â€“ User Schema)
const userSchema = new Schema({
  email: {
    type: String,
    required: true,
    unique: true
  },
  password: String,
  isVerified: {
    type: Boolean,
    default: false
  },
  verificationToken: String
});

ğŸ“© Send Verification Email (Node + Nodemailer)
Install
npm install nodemailer

Email Sender
import nodemailer from "nodemailer";

const transporter = nodemailer.createTransport({
  service: "gmail",
  auth: {
    user: process.env.EMAIL_USER,
    pass: process.env.EMAIL_PASS
  }
});

export async function sendVerificationMail(email, token) {
  const link = `${process.env.NEXT_PUBLIC_API_URL}/verify-email?token=${token}`;

  await transporter.sendMail({
    from: process.env.EMAIL_USER,
    to: email,
    subject: "Verify your BlogSpace account",
    html: `<p>Click to verify your email:</p>
           <a href="${link}">Verify Email</a>`
  });
}

ğŸ§  During Registration API
import crypto from "crypto";

const token = crypto.randomBytes(32).toString("hex");

await User.create({
  email,
  password,
  verificationToken: token,
  isVerified: false
});

await sendVerificationMail(email, token);

âœ… Verify Email API (Next.js API Route)
export async function GET(req) {
  const { searchParams } = new URL(req.url);
  const token = searchParams.get("token");

  const user = await User.findOne({ verificationToken: token });

  if (!user) {
    return Response.json({ message: "Invalid token" }, { status: 400 });
  }

  user.isVerified = true;
  user.verificationToken = null;
  await user.save();

  return Response.json({ message: "Email verified successfully" });
}

ğŸ”’ Block Login Until Verified
if (!user.isVerified) {
  return res.status(403).json({ message: "Please verify your email first" });
}

âœ… Level 3: Email Existence Check (Advanced / Optional)

Use third-party services:

ZeroBounce

Hunter.io

Mailgun validation

NeverBounce

âš ï¸ These cost money but detect temporary / fake domains

âœ… Recommended for BlogSpace

âœ” Format validation
âœ” Email verification link (OTP or token)
âœ” Block login if not verified

This is production-ready ğŸš€

If you want, I can:

Integrate this directly into your existing BlogSpace auth API

Show OTP-based verification instead of link

Help configure Gmail App Password / SMTP

Just tell me ğŸ‘
